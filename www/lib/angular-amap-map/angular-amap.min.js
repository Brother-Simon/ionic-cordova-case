!function(e,t){"use strict";"object"==typeof exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(window,function(e){"use strict";var t={navCtrl:!0,scaleCtrl:!0,overviewCtrl:!0,enableScrollWheelZoom:!0,zoom:10},o=function(e){return null===e||void 0===e},n=function(e,t){if(!e)throw new Error(t)},r=function(){return{restrict:"E",scope:{options:"="},link:function(e,r,i){var l={};l.navCtrl=o(e.options.navCtrl)?t.navCtrl:e.options.navCtrl,l.scaleCtrl=o(e.options.scaleCtrl)?t.scaleCtrl:e.options.scaleCtrl,l.overviewCtrl=o(e.options.overviewCtrl)?t.overviewCtrl:e.options.overviewCtrl,l.enableScrollWheelZoom=o(e.options.enableScrollWheelZoom)?t.enableScrollWheelZoom:e.options.enableScrollWheelZoom,l.zoom=o(e.options.zoom)?t.zoom:e.options.zoom,n(e.options.center,"options.center must be set"),n(e.options.center.longitude,"options.center.longitude must be set"),n(e.options.center.latitude,"options.center.latitude must be set"),l.center={longitude:e.options.center.longitude,latitude:e.options.center.latitude},l.city=e.options.city,l.markers=e.options.markers;var a={scrollWheel:l.enableScrollWheelZoom},s=new AMap.Map(r.find("div")[0],a);if(s.setZoom(l.zoom),s.setCenter([l.center.longitude,l.center.latitude]),l.navCtrl&&s.plugin(["AMap.ToolBar"],function(){var e=new AMap.ToolBar;s.addControl(e)}),l.scaleCtrl&&s.plugin(["AMap.Scale"],function(){var e=new AMap.Scale;s.addControl(e)}),l.overviewCtrl&&s.plugin(["AMap.OverView"],function(){var e=new AMap.OverView({visible:!1});s.addControl(e)}),l.markers){var c=[],p=[],u=function(e,t,o){return function(n){o.open(e,t.getPosition())}},d=function(){for(var e=0;e<p.length;e++)AMap.event.removeListener(p[e]);p.length=0;for(var e=0;e<c.length;e++)c[e].setMap(null);c.length=0;for(var e in l.markers){var t=l.markers[e],o=new AMap.LngLat(t.longitude,t.latitude),n=new AMap.Marker({icon:t.icon,position:o});if(n.setMap(s),c.push(n),!t.title&&!t.content)return;var r=new AMap.InfoWindow({isCustom:!1,autoMove:!0,content:"<p>"+(t.title?t.title:"")+"</p><p>"+(t.content?t.content:"")+"</p>"});t.width&&t.height&&r.setSize(new AMap.Size(t.width,t.height)),p.push(AMap.event.addListener(n,"click",u(s,n,r)))}};d(),e.$watch("options.center",function(t,o){l=e.options,s.setCenter([l.center.longitude,l.center.latitude]),d()},!0),e.$watch("options.markers",function(t,o){l.markers=e.options.markers,d()},!0),e.$on("$destroy",function(){s&&s.destroy&&s.destroy()})}},template:'<div style="width: 100%; height: 100%;"></div>'}},i=e.module("angular-amap",[]);return i.directive("ngAmap",[r]),"angular-amap"});